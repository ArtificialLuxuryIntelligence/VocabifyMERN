(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=123},159:function(e,t,n){},246:function(e,t,n){e.exports=n(474)},247:function(e,t,n){},269:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},297:function(e,t){},299:function(e,t){},331:function(e,t){},332:function(e,t){},410:function(e,t){},412:function(e,t){},474:function(e,t,n){"use strict";n.r(t);n(247);var a=n(0),o=n.n(a),r=n(242),s=n.n(r),i=n(30),l=n(41),d=n(24),c=n.n(d),p=n(35),u=n(16),h=n(17),g=n(19),m=n(18),f=n(27),b=n(20),v=n(58),w=n(55),S=n.n(w),k={loggingIn:function(){localStorage.setItem("vocabify",JSON.stringify({isLoggedIn:!0}))},loggingOut:function(){localStorage.setItem("vocabify",JSON.stringify({}))},isLoggedIn:function(){var e=JSON.parse(localStorage.getItem("vocabify"));return!(!e||!e.isLoggedIn)}},W=(n(269),n(245)),E=function(e){var t=e.component,n=Object(W.a)(e,["component"]);return o.a.createElement(v.b,Object.assign({},n,{render:function(e){return k.isLoggedIn()?o.a.createElement(t,Object.assign({},e,n)):o.a.createElement(v.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},O=n(54),C=(n(274),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).state={navigate:!1,navOpen:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.state.navigate?o.a.createElement(v.a,{to:"/login",push:!0}):o.a.createElement("nav",{className:this.state.navOpen?"nav-open":""},o.a.createElement("span",null,o.a.createElement("h1",null,"Vocabify")),o.a.createElement("div",{onClick:function(){return e.toggleNav()},className:"mobile-menu-toggle"},o.a.createElement("div",{id:"hamburger"},o.a.createElement("span",null))),o.a.createElement("ul",null,o.a.createElement("li",{className:"nav-item"},o.a.createElement(O.b,{to:"/"},"Home")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(O.b,{to:"/account"},"Account")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(O.b,{to:"/read"},"Read")),o.a.createElement("li",{className:"nav-item"},o.a.createElement(O.b,{to:"/",onClick:function(t){return e.handleSignout(t)}},"Logout"))))}},{key:"handleSignout",value:function(e){this.setState({navigate:!0}),this.props.handleSignout(e)}},{key:"toggleNav",value:function(){this.setState({navOpen:!this.state.navOpen})}}]),t}(a.Component)),N=(n(159),n(275),n(91)),T=n.n(N),y=function(e){var t=e.randomString;return t?t.split(" ").map((function(t,n){return o.a.createElement(o.a.Fragment,{key:n+t},0===n?null:" ",t.includes("\n")?t.split("\n").map((function(n,a){return o.a.createElement(o.a.Fragment,{key:a+t},0===a?null:"\n",o.a.createElement("span",{className:"searchable-word ".concat(e.wordHeading?e.wordHeading:""),onClick:function(t){return e.handleSpanClick(t)}},n))})):o.a.createElement("span",{className:"searchable-word ".concat(e.wordHeading?e.wordHeading:""),onClick:function(t){return e.handleSpanClick(t)}},t))})):o.a.createElement("p",null,"*Empty entry*")};function j(e){return o.a.createElement("div",null,e.word.map((function(t,n){return o.a.createElement("div",{key:n},o.a.createElement(T.a,{open:0===n,triggerClassName:"clickable word",triggerOpenedClassName:"clickable word",handleSpanClick:e.handleSpanClick,trigger:t.word,transitionTime:120},o.a.createElement(x,{handleSpanClick:e.handleSpanClick,word:t,lang:e.lang,wordHeading:e.wordHeading})))})))}function x(e){var t=Object.keys(e.word.meaning);return o.a.createElement("div",null,t.map((function(t,n){return o.a.createElement("div",{key:n},o.a.createElement(T.a,{open:0===n,triggerClassName:"clickable pos",triggerOpenedClassName:"clickable pos",handleSpanClick:e.handleSpanClick,trigger:t,transitionTime:120},o.a.createElement("ol",null,o.a.createElement(D,{handleSpanClick:e.handleSpanClick,def:e.word.meaning[t],lang:e.lang,wordHeading:e.wordHeading}))))})))}function D(e){switch(e.lang){case"en":return o.a.createElement("div",null,e.def.map((function(t,n){return t.definition?o.a.createElement("div",{key:n+t.definition.slice(1,6)},t.definition&&o.a.createElement("li",null,o.a.createElement(y,{handleSpanClick:e.handleSpanClick,randomString:t.definition,lang:e.lang,wordHeading:e.wordHeading}))):null})));case"fr":case"es":return o.a.createElement("div",null,e.def.definitions.map((function(t,n){return t.definition?o.a.createElement("div",{key:n+t.definition.slice(1,6)},t.definition&&o.a.createElement("li",null,o.a.createElement(y,{handleSpanClick:e.handleSpanClick,randomString:t.definition,lang:e.lang,wordHeading:e.wordHeading}))):null})));default:return null}}var z=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){if(n.props.definition)return console.log("got a def"),void n.setState({isLoading:!1,defintionToggled:!0});n.props.autoload&&n.getWordDef()},n.getWordDef=Object(p.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0,defintionToggled:!0,fetchFail:!1}),e.prev=1,e.next=4,n.props.getDefinitions([n.props.word],"false");case 4:if((t=e.sent)&&0!==t.length){e.next=8;break}return n.setState({isLoading:!1,defintionToggled:!1,fetchFail:!0}),e.abrupt("return");case 8:n.setState({definition:t,isLoading:!1,word:t[0][0].word,fetchFail:!1}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),n.handleAddWord=function(){n.props.addUnknownWord(n.state.word||n.props.word)},n.handleRemoveWord=function(){n.props.removeWord(n.state.word||n.props.word)},n.handleTranslateWord=function(){var e;e=n.state.word?n.state.word:n.props.word;window.open("https://translate.google.com/?um=1&ie=UTF-8&hl=en&client=tw-ob#".concat(n.props.lang,"/en/").concat(e),"translate","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=300,left=100,top=100")},n.state={isLoading:!0,defintionToggled:!1,definition:n.props.definition||[]},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.state.fetchFail||!1===this.state.defintionToggled&&this.props.autoload?o.a.createElement("p",{onClick:function(){return e.getWordDef()}},"Cannot find definiton of ",o.a.createElement("em",null,this.props.word),". Click here to try again"):!1===this.state.defintionToggled?o.a.createElement("p",{onClick:function(){return e.getWordDef()}},this.props.word):this.state.isLoading?o.a.createElement("p",null," Loading word..."):o.a.createElement("div",null,o.a.createElement("div",null,this.state.definition.map((function(t,n){return t.length>1?o.a.createElement("div",{key:n},-1===e.props.unknownWords.indexOf(t[0].word)&&o.a.createElement("button",{className:"add-button",onClick:function(t){return e.handleAddWord()}},"Add word"),-1!==e.props.unknownWords.indexOf(t[0].word)&&o.a.createElement("button",{className:"remove-button",onClick:function(t){return e.handleRemoveWord()}},"Remove word"),o.a.createElement("button",{className:"translate",onClick:function(t){return e.handleTranslateWord()}},"Translate"),o.a.createElement(T.a,{open:!0,triggerClassName:"clickable word-heading",triggerOpenedClassName:"clickable word-heading",handleSpanClick:e.props.handleSpanClick,trigger:t[0].word,transitionTime:120},o.a.createElement(j,{handleSpanClick:e.props.handleSpanClick,word:t,lang:e.props.lang,wordHeading:t[0].word}))):o.a.createElement("div",{key:n},t.map((function(t,n){return o.a.createElement("div",{key:n},-1===e.props.unknownWords.indexOf(t.word)&&o.a.createElement("button",{className:"add-button",onClick:function(t){return e.handleAddWord()}},"Add word"),-1!==e.props.unknownWords.indexOf(t.word)&&o.a.createElement("button",{className:"remove-button",onClick:function(t){return e.handleRemoveWord()}},"Remove word"),o.a.createElement("button",{className:"translate",onClick:function(t){return e.handleTranslateWord()}},"Translate"),o.a.createElement(T.a,{open:!0,triggerClassName:"clickable word-heading",triggerOpenedClassName:"clickable word-heading",handleSpanClick:e.props.handleSpanClick,trigger:t.word,transitionTime:120,wordHeading:t.word},o.a.createElement(x,{handleSpanClick:e.props.handleSpanClick,word:t,lang:e.props.lang,wordHeading:t.word})))})))}))))}},{key:"componentDidUpdate",value:function(e){this.props.autoload&&this.props.word!==e.word&&(this.getWordDef(),console.log("did update"))}}]),t}(a.Component),L=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){0===n.state.definition.length&&n.props.unknownWords.length>4&&n.getNewWord()},n.getNewWord=Object(p.a)(c.a.mark((function e(){var t,a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),t=JSON.parse(localStorage.getItem("vocabify")).token,a={vocabSize:n.props.vocabSize,unknownWords:n.props.unknownWords,knownWords:n.props.knownWords,lang:n.props.lang},o={"Content-Type":"application/json",Authorization:"bearer ".concat(t)},console.log("getting new word"),e.prev=5,e.next=8,S.a.post("/words/random",a,{headers:o});case 8:return r=e.sent,console.log(r),r.data.success&&(n.setState({newWord:r.data.definition[0][0].word}),n.setState({definition:r.data.definition}),n.setState({isLoading:!1}),n.setState({wordKnown:!1})),n.setState({isLoading:!1}),e.abrupt("return");case 15:e.prev=15,e.t0=e.catch(5),e.t0.response&&401===e.t0.response.status&&(console.log("unauthorized.. loggin out"),k.loggingOut(),n.props.history.push("/login")),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,15]])}))),n.handleNewWord=function(){n.getNewWord()},n.state={newWord:"floof",wordKnown:!1,definition:[],isLoading:!0,lang:n.props.lang},n.getNewWord=n.getNewWord.bind(Object(f.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.props.unknownWords.length<5?o.a.createElement("div",null,o.a.createElement("p",null,"It looks like you don't have enough saved words for us to get a good idea of your level."),o.a.createElement("p",null,"Take this"," ",o.a.createElement("a",{className:"testLink",onClick:function(){return e.props.redirectToRead()}},"reading test")," ","to get started.")):this.state.isLoading?o.a.createElement("div",{className:"random-word"},o.a.createElement("p",null," Loading new word...")):0===this.state.definition.length?o.a.createElement("div",{className:"random-word"},o.a.createElement("p",null,"Sorry, we couldn't find a word.",o.a.createElement("button",{onClick:function(){return e.handleNewWord()}},"Try again"))):o.a.createElement("div",{className:"random-word"},o.a.createElement("button",{onClick:function(){return e.handleNewWord()}},"New word"),o.a.createElement(z,{lang:this.props.lang,autoload:!0,word:this.state.newWord,definition:this.state.definition,handleSpanClick:this.props.handleSpanClick,vocabSize:this.props.vocabSize,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,unknownWords:this.props.unknownWords,addToAppState:this.props.addToAppState}))}},{key:"componentDidUpdate",value:function(e){this.props.lang!==e.lang&&this.props.unknownWords.length>4&&this.getNewWord()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.lang!==t.lang?{lang:e.lang,definition:[]}:null}}]),t}(a.Component),U=function(e){function t(){return Object(u.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("select",{value:this.props.lang,onChange:this.props.handleDropdownChange},o.a.createElement("option",{value:"en"},"English"),o.a.createElement("option",{value:"es"},"Spanish"),o.a.createElement("option",{value:"fr"},"French"))}}]),t}(a.Component),A=(n(279),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).state={lang:n.props.lang},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"search-results"},o.a.createElement(z,{autoload:this.props.autoload,word:this.props.word,lang:this.props.lang,handleSpanClick:this.props.handleSpanClick,vocabSize:this.props.vocabSize,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,unknownWords:this.props.unknownWords,addToAppState:this.props.addToAppState}))}}]),t}(a.Component)),I=function(e){function t(e){return Object(u.a)(this,t),Object(g.a)(this,Object(m.a)(t).call(this,e))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"search-form"},o.a.createElement("h3",{id:"search-heading"},"search"),o.a.createElement("form",{id:"searchForm"},o.a.createElement("input",{name:"searchTerm",ref:"searchTerm",value:this.props.value,onChange:this.props.handleChange,lang:this.props.lang}),o.a.createElement("button",{onClick:this.props.handleSubmit},"submit")))}}]),t}(a.Component),P=(n(280),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).toggleSidebar=function(){n.setState({sidebarOpen:!n.state.sidebarOpen})},n.toggleSearchBox=function(e){n.setState({searchBoxOpen:!n.state.searchBoxOpen})},n.handleChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),0!==n.state.searchTerm.length&&(n.setState({searchWord:n.state.searchTerm,searchTerm:""}),document.getElementById("searchForm").reset())},n.state={sidebarOpen:!1,searchWord:null,searchTerm:"",searchBoxOpen:!0},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{id:"sidebar-nav-sm"},o.a.createElement("button",{onClick:function(){return e.toggleSidebar()},className:"sidebar-toggle sidebar-toggle-sm"},this.state.sidebarOpen?"close":"open")),o.a.createElement("div",{className:this.state.sidebarOpen?"sidebar sidebar-open":"sidebar"},o.a.createElement("div",{className:"sidebar-sticky"},o.a.createElement("div",{className:"heading"},o.a.createElement("h2",null," words"),o.a.createElement("button",{className:"sidebar-toggle sidebar-toggle-md",onClick:function(){return e.toggleSidebar()}},this.state.sidebarOpen?">>":"<<")),o.a.createElement("div",{className:"search"},o.a.createElement("button",{id:"hide-search",onClick:function(){return e.toggleSearchBox()}},this.state.searchBoxOpen?"close search":"open search"),o.a.createElement("div",{className:this.state.searchBoxOpen?"search-box search-box-open":"search-box search-box-closed"},o.a.createElement(I,{value:this.state.searchTerm,handleChange:this.handleChange,lang:this.props.lang,handleSubmit:this.handleSubmit}),o.a.createElement("div",null,null!==this.state.searchWord&&o.a.createElement(o.a.Fragment,null,o.a.createElement(A,{history:this.props.history,autoload:!0,word:this.state.searchWord,lang:this.props.lang,handleSpanClick:this.props.handleSpanClick,vocabSize:this.props.vocabSize,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,unknownWords:this.props.unknownWords,addToAppState:this.props.addToAppState}))))),this.props.isNewWordLoading?o.a.createElement("p",null,"adding word ... "):null,this.props.isLoading?o.a.createElement("p",null," Loading words..."):null,this.props.sidebarMessage.length>0?o.a.createElement("p",{className:"sidebar-message"},this.props.sidebarMessage):null),o.a.createElement("div",{className:"scroll-wrapper"},o.a.createElement("div",{className:"defs"},0===this.props.sidebarWords.length?o.a.createElement("p",null,"No words to show "):null,o.a.createElement("div",null,this.props.definitionJSON.map((function(t,n){return e.props.sidebarWords.includes(t[0].word)?o.a.createElement("div",{key:t[0].word},o.a.createElement("hr",null),o.a.createElement("button",{className:"delete-button",onClick:function(){return e.props.handleDeleteWord(t[0].word)}},"x"),o.a.createElement(z,{autoload:!0,definition:[t],word:t[0].word,lang:e.props.lang,handleSpanClick:e.props.handleSpanClick,vocabSize:e.props.vocabSize,getDefinitions:e.props.getDefinitions,addKnownWord:e.props.addKnownWord,addUnknownWord:e.props.addUnknownWord,removeWord:e.props.removeWord,unknownWords:e.props.unknownWords,addToAppState:e.props.addToAppState}),o.a.createElement("hr",null)):null})))))))}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.isLoading===e.isLoading&&this.props.isNewWordLoading===e.isNewWordLoading||this.setState({sidebarOpen:!0})}}]),t}(a.Component)),K=(n(281),n(282),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).toggleSidebar=function(){n.setState({sidebarOpen:!n.state.sidebarOpen})},n.toggleSearchBox=function(e){n.setState({searchBoxOpen:!n.state.searchBoxOpen})},n.handleChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),0!==n.state.searchTerm.length&&(n.setState({searchWord:n.state.searchTerm,searchTerm:""}),document.getElementById("searchForm").reset())},n.handleSpanClick=function(e){n.setState({searchWord:n.props.sanitizeText(e.target.innerText)})},n.state={sidebarOpen:!1,searchWord:n.props.searchWord,searchTerm:"",searchBoxOpen:!0},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{id:"sidebar-nav-sm"},o.a.createElement("button",{onClick:function(){return e.toggleSidebar()},className:"sidebar-toggle sidebar-toggle-sm"},this.state.sidebarOpen?"close":"open")),o.a.createElement("div",{className:this.state.sidebarOpen?"sidebar sidebar-open":"sidebar"},o.a.createElement("div",{className:"sidebar-sticky"},o.a.createElement("div",{className:"heading"},o.a.createElement("h2",null," words"),o.a.createElement("button",{className:"sidebar-toggle sidebar-toggle-md",onClick:function(){return e.toggleSidebar()}},this.state.sidebarOpen?">>":"<<")),o.a.createElement("div",{className:"search"},o.a.createElement("button",{id:"hide-search",onClick:function(){return e.toggleSearchBox()}},this.state.searchBoxOpen?"close search":"open search"),o.a.createElement("div",{className:this.state.searchBoxOpen?"search-box search-box-open":"search-box search-box-closed"},o.a.createElement(I,{value:this.state.searchTerm,handleChange:this.handleChange,lang:this.props.lang,handleSubmit:this.handleSubmit}),o.a.createElement("div",null,null!==this.state.searchWord&&o.a.createElement(o.a.Fragment,null,o.a.createElement(A,{history:this.props.history,autoload:!0,word:this.state.searchWord,lang:this.props.lang,handleSpanClick:this.handleSpanClick,vocabSize:this.props.vocabSize,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,unknownWords:this.props.unknownWords,addToAppState:this.props.addToAppState})))))),o.a.createElement("div",{className:"scroll-wrapper"},o.a.createElement("div",{className:"defs"},o.a.createElement("div",null,this.props.definitionJSON.map((function(t,n){return e.props.sidebarWords.includes(t[0].word)?o.a.createElement("div",{key:t[0].word},o.a.createElement("hr",null),o.a.createElement("button",{className:"delete-button",onClick:function(){return e.props.handleDeleteWord(t[0].word)}},"x"),o.a.createElement(z,{autoload:!0,definition:[t],word:t[0].word,lang:e.props.lang,handleSpanClick:e.props.handleSpanClick,vocabSize:e.props.vocabSize,getDefinitions:e.props.getDefinitions,addKnownWord:e.props.addKnownWord,addUnknownWord:e.props.addUnknownWord,removeWord:e.props.removeWord,unknownWords:e.props.unknownWords,addToAppState:e.props.addToAppState}),o.a.createElement("hr",null)):null})))))))}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.searchWord!==e.searchWord&&this.setState({searchWord:this.props.searchWord,sidebarOpen:!0})}}]),t}(a.Component)),J=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).handleDropdownChange=function(e){e.preventDefault(),n.props.addToAppState("lang",e.target.value),n.setState({searchWord:null})},n.handleChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),0!==n.state.searchTerm.length&&(n.setState({searchWord:n.state.searchTerm,searchTerm:""}),document.getElementById("searchForm").reset())},n.handleSpanClick=function(e){var t=n.props.sanitizeText(e.target.innerText)[0];n.setState({searchWord:t})},n.redirectToRead=function(){n.props.history.push("/read")},n.toggleSidebar=function(){n.setState({sidebarOpen:!n.state.sidebarOpen})},n.state={searchWord:null,searchTerm:"",sidebarOpen:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"home grid-container"},o.a.createElement(C,{handleSignout:this.props.handleSignout}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"main"},o.a.createElement("h1",null,"Home"),o.a.createElement("div",null,o.a.createElement("p",null,"Set language"),o.a.createElement(U,{handleDropdownChange:this.handleDropdownChange,lang:this.props.lang})),o.a.createElement("h2",null,"Here is a word you might not know:"),o.a.createElement(L,{redirectToRead:this.redirectToRead,vocabSize:this.props.vocabSize,lang:this.props.lang,handleSpanClick:this.handleSpanClick,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,unknownWords:this.props.unknownWords,addToAppState:this.props.addToAppState,history:this.props.history})),o.a.createElement(K,{history:this.props.history,lang:this.props.lang,definitionJSON:[],unknownWords:this.props.unknownWords,handleRemoveWord:this.handleRemoveWord,handleDeleteWord:this.handleDeleteWord,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,handleSpanClick:this.handleSpanClick,searchWord:this.state.searchWord,sanitizeText:this.props.sanitizeText})))}},{key:"componentDidMount",value:function(){console.log("HOME language is:",this.props.lang)}}]),t}(a.Component),M=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).changeView=function(e){n.setState({currentView:e,message:""})},n.currentView=function(){switch(n.state.currentView){case"signUp":return o.a.createElement("form",null,o.a.createElement("h2",null,"Welcome!"),o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Sign up"),o.a.createElement("p",null,n.state.message),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("label",null,"Username:"),o.a.createElement("input",{value:n.state.signUpEmail,onChange:n.handleChange,name:"signUpEmail",type:"text",required:!0})),o.a.createElement("li",null,o.a.createElement("label",null,"Password:"),o.a.createElement("input",{value:n.state.signUpPassword,onChange:n.handleChange,name:"signUpPassword",type:"password",required:!0})))),o.a.createElement("button",{onClick:function(e){return n.handleSignUp(e)}},"Sign up"),o.a.createElement("button",{type:"button",onClick:function(){return n.changeView("signIn")}},"Have an account?"));case"signIn":return o.a.createElement("form",null,o.a.createElement("h2",null,"Welcome!"),o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Log In"),o.a.createElement("p",null,n.state.message),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("label",null,"Username:"),o.a.createElement("input",{value:n.state.signInEmail,onChange:n.handleChange,name:"signInEmail",type:"text",required:!0})),o.a.createElement("li",null,o.a.createElement("label",null,"Password:"),o.a.createElement("input",{value:n.state.signInPassword,onChange:n.handleChange,name:"signInPassword",type:"password",required:!0})))),o.a.createElement("button",{onClick:function(e){return n.handleSignIn(e)}},"Login"),o.a.createElement("button",{type:"button",onClick:function(){n.changeView("signUp")}},"Create an Account"))}},n.state={message:"",token:"",signInEmail:"",signInPassword:"",signUpEmail:"",signUpPassword:"",currentView:"signIn"},n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleSignIn=n.handleSignIn.bind(Object(f.a)(n)),n.handleSignUp=n.handleSignUp.bind(Object(f.a)(n)),n.addToAppState=n.props.addToAppState,n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("section",{id:"entry-page"},this.currentView())}},{key:"componentDidMount",value:function(){var e=Object(p.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("vocabify")||!JSON.parse(localStorage.getItem("vocabify")).token){e.next=7;break}return t=JSON.parse(localStorage.getItem("vocabify")).token,n={"Content-Type":"application/json",Authorization:"bearer ".concat(t)},e.next=5,S.a.post("/users/authcheck",null,{headers:n});case 5:200===e.sent.status&&this.props.history.push("/");case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState(Object(i.a)({},e.target.name,e.target.value))}},{key:"handleSignIn",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.signInEmail,o=n.signInPassword,r=this.props.history,s={email:a,password:o};S.a.post("/users/signin",s).then((function(e){if(e.data.success){k.loggingIn(),console.log(e.data);var n=e.data,a=n.token,o=n.vocabSize,s=n.lang,i=n.words;t.addToAppState("vocabSize",o),t.addToAppState("lang",s),t.addToAppState("words",i);var l=JSON.parse(localStorage.getItem("vocabify"))||{};l.token=a,l.vocabSize=o,l.lang=s,l.words=i,localStorage.setItem("vocabify",JSON.stringify(l)),r.push("/")}else t.setState({message:e.data.message}),console.log(e.data.message)})).catch((function(e){return console.log(e)}))}},{key:"handleSignUp",value:function(e){var t=this;e.preventDefault();var n=this.state,a={email:n.signUpEmail,password:n.signUpPassword};console.log(a),S.a.post("/users/signup",a).then((function(e){console.log(e.data),!0===e.data.success?(console.log("SUCCESS"),t.setState({currentView:"signIn",message:""})):(t.setState({message:e.data.message}),console.log(e.data.message))})).catch((function(e){return console.log(e)}))}}]),t}(a.Component),R=(n(283),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(i.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),0!==n.state.searchTerm.length&&(n.setState({searchWord:n.state.searchTerm,searchTerm:""}),document.getElementById("searchForm").reset())},n.handleSpanClick=function(e){var t=n.props.sanitizeText(e.target.innerText)[0];n.setState({searchWord:t})},n.handleDropdownChange=function(e){e.preventDefault(),n.props.addToAppState("lang",e.target.value),n.setState({searchWord:null})},n.toggleSidebar=function(){n.setState({sidebarOpen:!n.state.sidebarOpen})},n.state={searchWord:null,loadedWords:[],searchTerm:"",sidebarOpen:!1},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"account grid-container"},o.a.createElement(C,{handleSignout:this.props.handleSignout}),o.a.createElement(U,{handleDropdownChange:this.handleDropdownChange,lang:this.props.lang}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"main"},o.a.createElement("div",null),o.a.createElement("div",null,o.a.createElement("h2",null,"Your saved words: "),o.a.createElement("ul",null,this.props.unknownWords.map((function(t,n){return o.a.createElement("li",{key:t},o.a.createElement("span",{onClick:function(e){return"P"===e.target.tagName?e.target.nextElementSibling.style.display="none":null}},o.a.createElement(z,{lang:e.props.lang,word:t,handleSpanClick:e.handleSpanClick,vocabSize:e.props.vocabSize,getDefinitions:e.props.getDefinitions,addKnownWord:e.props.addKnownWord,addUnknownWord:e.props.addUnknownWord,removeWord:e.props.removeWord,unknownWords:e.props.unknownWords,addToAppState:e.props.addToAppState}),o.a.createElement("button",{className:"remove-button-unloaded",onClick:function(){return e.props.removeWord(t)}},"Remove")))}))))),o.a.createElement(K,{history:this.props.history,lang:this.props.lang,definitionJSON:[],unknownWords:this.props.unknownWords,handleRemoveWord:this.handleRemoveWord,handleDeleteWord:this.handleDeleteWord,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,handleSpanClick:this.handleSpanClick,searchWord:this.state.searchWord,sanitizeText:this.props.sanitizeText})))}}]),t}(a.Component)),B=n(59),H=(n(284),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){n.setState({value:e.target.value})},n.renderText=function(e){switch(console.log("render text called"),console.log(e),e){case"en":return"English Test";case"fr":return"French TEST";case"es":return"S\xe1nchez completar\xe1 la ronda entre el jueves y el viernes con todas las fuerzas pol\xedticas, a cuyos representantes ir\xe1 de recibiendo en el orden de mayor a menor representaci\xf3n parlamentaria. Con estas reuniones, el presidente del Gobierno persigue \u201cavanzar hacia este gran pacto que permita sentar las bases de la Espa\xf1a del d\xeda despu\xe9s tras vencer esta pandemia global\u201d. \u201cTenemos que empezar hoy a construir ya la prosperidad del ma\xf1ana\u201d, ha asegurado Montero."}},n.state={value:""},n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h2",null,"Textarea"),this.props.unknownWords.length<5&&o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null," Language Test:"),o.a.createElement("p",null,"Click submit below the following text."),o.a.createElement("p",null,"Click on words you don't know to look up their definition."),o.a.createElement("p",null,'Click "add word" to add this word to your vocabulary list.'),o.a.createElement("p",null," Please add at least 5 words to get started."),o.a.createElement("textarea",{id:"textarea",value:this.renderText(this.props.lang),onChange:this.handleChange})),this.props.unknownWords.length>=5&&o.a.createElement("textarea",{id:"textarea",placeholder:"Paste your text here",onChange:this.handleChange}),o.a.createElement("button",{onClick:function(){return e.props.handleSubmit()}},"Submit"))}}]),t}(a.Component)),F=(n(285),function(e){function t(){return Object(u.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"textreader"},o.a.createElement("h2",null,"Reader"),o.a.createElement("button",{onClick:function(){return e.props.handleNewText()}},"New text"),o.a.createElement("div",{className:"text-reader"},o.a.createElement(y,{handleSpanClick:this.props.handleSpanClick,randomString:this.props.fullTextSplit[this.props.pageNumber]})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:this.props.handlePrevPage},"previous page"),o.a.createElement("button",{onClick:this.props.handleNextPage},"next page")))}}]),t}(a.Component)),V=(n(160),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).removeWordArrayDupes=function(e){var t=[],n=[];return e.map((function(e){n.includes(e[0].word)||(n.push(e[0].word),t.push(e))})),t},n.loadPageDefinitions=Object(p.a)(c.a.mark((function e(){var t,a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),t=n.state.fullTextSplit[n.state.pageNumber],a=n.props.sanitizeText(n.removeCaps(t)),e.prev=3,e.next=6,n.props.getDefinitions(a,"true");case 6:o=e.sent,r=[],o.forEach((function(e){return r.push(e[0].word)})),n.setState({definitionJSON:n.removeWordArrayDupes([].concat(Object(B.a)(n.state.definitionJSON),Object(B.a)(o))),sidebarWords:Object(B.a)(new Set([].concat(Object(B.a)(n.state.sidebarWords),r))),isLoading:!1}),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[3,12]])}))),n.handleSubmit=Object(p.a)(c.a.mark((function e(){var t,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:50,t=document.querySelector("#textarea"),a=t.value,o=n.splitText(a,50),n.setState({currentView:"read",fullText:a,fullTextSplit:o},(function(){return n.loadPageDefinitions()}));case 5:case"end":return e.stop()}}),e)}))),n.handleNextPage=function(){n.setState({pageNumber:n.state.pageNumber<n.state.fullTextSplit.length-1?n.state.pageNumber+1:n.state.pageNumber},(function(){n.state.pageNumber>n.state.largestLoadedPageNumber?(n.setState({largestLoadedPageNumber:n.state.pageNumber}),n.loadPageDefinitions()):(n.setState({isLoading:!1}),console.log("definitions already loaded"))}))},n.handlePrevPage=function(){n.setState({pageNumber:0===n.state.pageNumber?0:n.state.pageNumber-1})},n.handleSpanClick=function(){var e=Object(p.a)(c.a.mark((function e(t){var a,o,r,s,i,l,d,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isNewWordLoading:!0}),a=t.target.classList[1],o=t.target.innerText,!(n.state.sidebarWords.indexOf(o)>0)){e.next=8;break}return n.setState({sidebarMessage:"Definition of ".concat(o," is already loaded!")}),setTimeout((function(){return n.setState({sidebarMessage:""})}),1500),n.setState({isNewWordLoading:!1}),e.abrupt("return");case 8:return r=n.props.sanitizeText(o),e.prev=9,e.next=12,n.props.getDefinitions(r,"false");case 12:if((s=e.sent)&&0!==s.length){e.next=18;break}return n.setState({isNewWordLoading:!1}),n.setState({sidebarMessage:"Could not find definition of ".concat(r)}),setTimeout((function(){return n.setState({sidebarMessage:""})}),1500),e.abrupt("return");case 18:if(i=s[0][0].word,console.log(i),!(n.state.sidebarWords.indexOf(i)>0)){e.next=25;break}return n.setState({sidebarMessage:"Definition of ".concat(i," already loaded!")}),setTimeout((function(){return n.setState({sidebarMessage:""})}),1500),n.setState({isNewWordLoading:!1}),e.abrupt("return");case 25:l=Object(B.a)(n.state.definitionJSON),(d=Object(B.a)(n.state.sidebarWords)).indexOf(a)>=0?(console.log("index of",a,d.indexOf(a)),p=d.indexOf(a),l.splice(p+1,0,s[0]),d.splice(p+1,0,i)):(l=s.concat(l),d.unshift(i)),l=Array.from(new Set(l.map(JSON.stringify)),JSON.parse),d=Object(B.a)(new Set(d)),n.setState({definitionJSON:l}),n.setState({sidebarWords:d}),n.setState({isNewWordLoading:!1}),n.setState({sidebarMessage:""}),e.next=41;break;case 36:e.prev=36,e.t0=e.catch(9),console.log("ERROR",e.t0),setTimeout((function(){return n.setState({sidebarMessage:""})}),1500),n.setState({sidebarMessage:"Network error, try again later"});case 41:case"end":return e.stop()}}),e,null,[[9,36]])})));return function(t){return e.apply(this,arguments)}}(),n.handleNewText=function(){n.setState({currentView:"submit",words:"",fullText:"",fullTextSplit:[],pageNumber:0,largestLoadedPageNumber:0,sidebarWords:[],definitionJSON:[]})},n.handleAddWord=function(e){e.stopPropagation();var t=e.target.parentElement.children[0].children[0].innerText;n.props.addUnknownWord(t)},n.handleRemoveWord=function(e){e.stopPropagation();var t=e.target.parentElement.children[0].children[0].innerText;n.props.removeWord(t)},n.handleDeleteWord=function(e){n.props.addKnownWord(e);var t=n.state.sidebarWords;t.splice(t.indexOf(e),1),n.setState({sidebarWords:t})},n.handleDropdownChange=function(e){e.preventDefault(),n.setState({sidebarWords:[]}),n.props.addToAppState("lang",e.target.value)},n.state={currentView:"submit",knownWords:n.props.knownWords,unknownWords:n.props.unknownWords,vocabSize:n.props.vocabSize,words:[],fullText:"",fullTextSplit:[],sidebarWords:[],definitionJSON:[],isLoading:!1,isNewWordLoading:!1,pageNumber:0,largestLoadedPageNumber:-1,sidebarMessage:"",textareaValue:""},n.handleSpanClick=n.handleSpanClick.bind(Object(f.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return"submit"===this.state.currentView?o.a.createElement("div",{className:"read grid-container"},o.a.createElement(C,{handleSignout:this.props.handleSignout}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"main"},o.a.createElement("h2",null,"Read"),o.a.createElement(U,{handleDropdownChange:this.handleDropdownChange,lang:this.props.lang}),o.a.createElement("div",{className:"text-submit"},o.a.createElement(H,{handleSubmit:this.handleSubmit,unknownWords:this.props.unknownWords,lang:this.props.lang}))))):o.a.createElement("div",{className:"read grid-container"},o.a.createElement(C,{handleSignout:this.props.handleSignout}),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"main"},o.a.createElement("h2",null,"Read"),o.a.createElement(U,{handleDropdownChange:this.handleDropdownChange,lang:this.props.lang}),o.a.createElement("div",{className:"reader"},o.a.createElement(F,{fullText:this.state.fullText,fullTextSplit:this.state.fullTextSplit,handleNewText:this.handleNewText,handleSpanClick:this.handleSpanClick,pageNumber:this.state.pageNumber,handleNextPage:this.handleNextPage,handlePrevPage:this.handlePrevPage}))),o.a.createElement(P,{history:this.props.history,lang:this.props.lang,definitionJSON:this.state.definitionJSON,unknownWords:this.props.unknownWords,handleRemoveWord:this.handleRemoveWord,handleDeleteWord:this.handleDeleteWord,getDefinitions:this.props.getDefinitions,addKnownWord:this.props.addKnownWord,addUnknownWord:this.props.addUnknownWord,removeWord:this.props.removeWord,sidebarWords:this.state.sidebarWords,handleSpanClick:this.handleSpanClick,isLoading:this.state.isLoading,isNewWordLoading:this.state.isNewWordLoading,pageNumber:this.state.pageNumber,sidebarMessage:this.state.sidebarMessage})))}},{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("vocabify"));if(e){var t=e.knownWords,n=e.unknownWords,a=e.vocabSize;this.setState({knownWords:t,unknownWords:n,vocabSize:a})}return null}},{key:"splitText",value:function(e,t){for(var n=e.split(" "),a=[],o=0;o<n.length;)a.push(n.slice(o,o+t).join(" ")),o+=t;return a}},{key:"removeCaps",value:function(e){return e}}]),t}(a.Component)),q=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).sendAppStateToServer=Object(p.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={words:n.state.words,lang:n.state.lang},console.log(t),a=JSON.parse(localStorage.getItem("vocabify")).token,e.next=5,S.a.post("/users/updateuser",t,{headers:{"Content-Type":"application/json",Authorization:"bearer ".concat(a)}});case 5:if("User updated"!==e.sent.data.message){e.next=10;break}return e.abrupt("return",{success:!0});case 10:return e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e)}))),n.uniq=function(e){return Array.from(new Set(e))},n.sanitizeText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.state.lang,a=e.toLowerCase().replace(/\s/g," ").replace(/^\d+$/g," ").replace(/[.,/#!?$%^&*;:{}\u201c\u201d=_`~()]/g,"").toLowerCase().split(" ").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));return"fr"===t&&(a=a.map((function(e){return e.replace(/^l'|^l\u2019|^m'|^m\u2019|^t'|^t\u2019|^s'|^s\u2019/gi,"")})),console.log(t)),n.uniq(a)},n.getDefinitions=function(){var e=Object(p.a)(c.a.mark((function e(t,a){var o,r,s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=JSON.parse(localStorage.getItem("vocabify")).token,r={lang:n.state.lang,knownWords:n.state.words[n.state.lang].knownWords,unknownWords:n.state.words[n.state.lang].unknownWords,words:t,filter:a},s={"Content-Type":"application/json",Authorization:"bearer ".concat(o)},e.prev=3,e.next=6,S.a.post("/words/definitions",r,{headers:s});case 6:return d=e.sent,console.log("vocabSize",d.data.vocabSize),console.log(d.data),n.setState((function(e){return Object(l.a)({},e,{words:Object(l.a)({},e.words,Object(i.a)({},n.state.lang,Object(l.a)({},e.words[n.state.lang],{vocabSize:d.data.vocabSize})))})})),e.abrupt("return",d.data.definitions);case 13:e.prev=13,e.t0=e.catch(3),e.t0.response&&401===e.t0.response.status&&(console.log("unauthorized.. loggin out"),k.loggingOut(),n.forceUpdate()),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}(),n.handleSignout=function(){var e=Object(p.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("...Signing out"),e.next=4,n.sendAppStateToServer();case 4:e.sent.success?(k.loggingOut(),n.setState({navigate:!0})):console.log("update failed");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={vocabSize:0,lang:"placeholder",words:{en:{knownWords:[],unknownWords:[],vocabSize:""},es:{knownWords:[],unknownWords:[],vocabSize:""},fr:{knownWords:[],unknownWords:[],vocabSize:""},placeholder:{knownWords:[],unknownWords:[],vocabSize:""}},navOpen:!0},n.addToAppState=n.addToAppState.bind(Object(f.a)(n)),n.addKnownWord=n.addKnownWord.bind(Object(f.a)(n)),n.addUnknownWord=n.addUnknownWord.bind(Object(f.a)(n)),n.removeWord=n.removeWord.bind(Object(f.a)(n)),n.handleSignout=n.handleSignout.bind(Object(f.a)(n)),n.sendAppStateToServer=n.sendAppStateToServer.bind(Object(f.a)(n)),n.getDefinitions=n.getDefinitions.bind(Object(f.a)(n)),n.toggleNav=n.toggleNav.bind(Object(f.a)(n)),n.saveToLocal=n.saveToLocal.bind(Object(f.a)(n)),n}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"app-routes"},o.a.createElement(v.d,null,o.a.createElement(v.b,{exact:!0,path:"/login",render:function(t){return o.a.createElement(M,Object.assign({},t,{addToAppState:e.addToAppState}))}}),o.a.createElement(v.b,{exact:!0,path:"/read",render:function(t){return o.a.createElement(V,Object.assign({},t,{lang:e.state.lang,token:e.state.token,knownWords:e.state.words[e.state.lang].knownWords,unknownWords:e.state.words[e.state.lang].unknownWords,vocabSize:e.state.words[e.state.lang].vocabSize,addKnownWord:e.addKnownWord,addUnknownWord:e.addUnknownWord,removeWord:e.removeWord,handleSignout:e.handleSignout,getDefinitions:e.getDefinitions,addToAppState:e.addToAppState,sanitizeText:e.sanitizeText,navOpen:e.state.navOpen,toggleNav:e.toggleNav}))}}),o.a.createElement(E,{exact:!0,path:"/",component:J,lang:this.state.lang,handleSignout:this.handleSignout,vocabSize:this.state.words[this.state.lang].vocabSize,getDefinitions:this.getDefinitions,addKnownWord:this.addKnownWord,addUnknownWord:this.addUnknownWord,removeWord:this.removeWord,unknownWords:this.state.words[this.state.lang].unknownWords,addToAppState:this.addToAppState,sanitizeText:this.sanitizeText,navOpen:this.state.navOpen,toggleNav:this.toggleNav}),o.a.createElement(E,{exact:!0,path:"/account",component:R,lang:this.state.lang,handleSignout:this.handleSignout,vocabSize:this.state.words[this.state.lang].vocabSize,getDefinitions:this.getDefinitions,addKnownWord:this.addKnownWord,addUnknownWord:this.addUnknownWord,removeWord:this.removeWord,unknownWords:this.state.words[this.state.lang].unknownWords,addToAppState:this.addToAppState,sanitizeText:this.sanitizeText,navOpen:this.state.navOpen,toggleNav:this.toggleNav}))))}},{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("vocabify"));if(e&&e.isLoggedIn){var t=e.lang,n=e.words;this.setState({lang:t,words:n}),console.log("did mount and is logged in")}console.log("did mount")}},{key:"saveToLocal",value:function(){var e=JSON.parse(localStorage.getItem("vocabify"));e.lang=this.state.lang,e.words=this.state.words,localStorage.setItem("vocabify",JSON.stringify(e))}},{key:"addToAppState",value:function(e,t){this.setState(Object(i.a)({},e,t)),console.log("key",e,"value",t),this.saveToLocal()}},{key:"addKnownWord",value:function(e){var t=this,n=this.state.words[this.state.lang],a=n.knownWords,o=n.unknownWords;o.indexOf(e)<0&&a.indexOf(e)<0&&a.push(e),this.setState((function(e){return Object(l.a)({},e,{words:Object(l.a)({},e.words,Object(i.a)({},t.state.lang,Object(l.a)({},e.words[t.state.lang],{knownWords:a,unknownWords:o})))})})),this.saveToLocal()}},{key:"addUnknownWord",value:function(e){var t=this,n=this.state.words[this.state.lang],a=n.knownWords,o=n.unknownWords;o.unshift(e),a.indexOf(e)>0&&a.splice(a.indexOf(e),1),this.setState((function(e){return Object(l.a)({},e,{words:Object(l.a)({},e.words,Object(i.a)({},t.state.lang,Object(l.a)({},e.words[t.state.lang],{knownWords:a,unknownWords:o})))})})),this.saveToLocal()}},{key:"removeWord",value:function(e){var t=this,n=this.state.words[this.state.lang],a=n.knownWords,o=n.unknownWords,r=o.indexOf(e);r>=0&&o.splice(r,1),a.push(e),this.setState((function(e){return Object(l.a)({},e,{words:Object(l.a)({},e.words,Object(i.a)({},t.state.lang,Object(l.a)({},e.words[t.state.lang],{knownWords:a,unknownWords:o})))})})),this.saveToLocal()}},{key:"toggleNav",value:function(){console.log("toggle nav"),this.setState({navOpen:!this.state.navOpen})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(O.a,null,o.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[246,1,2]]]);
//# sourceMappingURL=main.e6315a3f.chunk.js.map